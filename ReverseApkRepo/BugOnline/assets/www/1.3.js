var mopub_click_url;function redo_tags(d){var b=d.document.getElementsByTagName("a");for(var a=0;a<b.length;a++){var c=b[a];if(c.href!="#"){c.href=mopub_click_url+"&r="+c.href}}}function mp_cb(b){ufid=b.ufid;mopub_click_url=b.click_url;if(device.platform=="native"){mopub_click_url="external://"+b.click_url}var a=document.getElementById("mopub-iframe-"+b.ufid);if(!a){return}if(b.ad){a=(a.contentWindow)?a.contentWindow:(a.contentDocument.document);a.document.open();a.document.write(b.ad);redo_tags(a);a.document.close()}else{a.parentNode.removeChild(a)}}function showMoPubAdvertisementIn(a){if(window.mopub_ad_width==null){window.mopub_ad_width=320}if(window.mopub_ad_height==null){window.mopub_ad_height=50}if(true){var i='<script type="text/javascript"> var mopub_ad_unit="'+mopub_ad_unit+'";var mopub_ad_width="'+mopub_ad_width+'";var mopub_ad_height="'+mopub_ad_height+'";<\/script><script src="http://ads.mopub.com/js/client/mopub.js"><\/script>';var m=$('<iframe id="mopub-iframe" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" vspace="0" style="max-height:50px;" src="about:blank"></iframe>');a.append(m);var f=m.get(0);setTimeout(function(){f=(f.contentWindow)?f.contentWindow:(f.contentDocument.document)?f.contentDocument.document:f.contentDocument;f.document.open();f.document.write(i);f.document.close()},0);return}function d(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz012345678";var p="";for(var o=0;o<20;o++){p+=n.charAt(Math.floor(Math.random()*n.length))}return p}var c="mopub-udid-cookie";if(window.mopub_ad_unit==null){console.log("MoPub load failed. mopub_ad_unit needs to be defined.");return}var h=document.createElement("a");h.href="http://ads.mopub.com/js/client/mopub.js";var b="http://"+h.hostname;if(h.port!="0"){b+=":"+h.port}var j=d();var g=b+"/m/ad?id="+mopub_ad_unit+"&udid=MOBILEWEBCOOKIE:"+e()+"&ufid="+j;if(window.mopub_keywords!=null){g+="&q="+escape(window.mopub_keywords)}g+="&jsonp=1&callback=mp_cb";a.append('<script type="text/javascript" src="'+b+'/js/clicktracker.js?v=23"><\/script>');a.append('<iframe id="mopub-iframe-'+j+'" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" vspace="0" width="'+window.mopub_ad_width+'" height="'+window.mopub_ad_height+'" src="about:blank"></iframe>');a.append('<script type="text/javascript" src="'+g+'"><\/script>');function k(o,r,n,t,q,s){var p=o+"="+escape(r)+((n)?";expires="+n.toGMTString():"")+((t)?";path="+t:"")+((q)?";domain="+q:"")+((s)?";secure":"");document.cookie=p}function l(p){var q=document.cookie.indexOf(p+"=");var n=q+p.length+1;if((!q)&&(p!=document.cookie.substring(0,p.length))){return null}if(q==-1){return null}var o=document.cookie.indexOf(";",n);if(o==-1){o=document.cookie.length}return unescape(document.cookie.substring(n,o))}function e(){if(!l(c)){k(c,d())}return l(c)}};
var deviceUrlProcessed;var setLocaleHandler;var device=window.device={};(function(){device.isPositionFixedSupported=function(){var d=$("<div style='height: 1000px;'><div id='fixed-position-test' style='width: 1px; height: 1px; opacity:0px; position: fixed; top: 0px;'></div></div>");$("body").append(d);var b=d.find("#fixed-position-test").offset().top;var c=window.pageYOffset;window.scrollTo(0,10);var a=d.find("#fixed-position-test").offset().top;window.scrollTo(0,c);d.remove();if(b==a-10){return true}else{return false}};device.open=(function(){var a=[];var c=function(d){console.debug("DEVICE URL "+d);$("#deviceUrl").attr("src",d)};deviceUrlProcessed=function(){console.debug("DEVICE URL deviceURLPRocessed "+a.length);a.shift();if(a.length>0){c(a[0].deviceUrl)}};var b=function(d){for(var e=0;e<a.length;e++){var f=a[e];if(f.timestamp<d){console.debug("removing stale items");a=a.slice(0,e);return}}};return function(d,g){var f=d+(g?"/"+encodeURIComponent(JSON.stringify(g)):"");var e=new Date().getTime();b(e-10000);a.push({deviceUrl:f,timestamp:e});console.debug("DEVICE URL open "+a.length);if(a.length===1){c(f)}}})();device.getCallUrl=function(b,a){return"device://"+b+(a?"/"+encodeURIComponent(JSON.stringify(a)):"")};device.platform_name=function(){return device.platform+"_"+device.name};device.isNativeIPhone=function(){return device.platform==="native"&&device.name==="iphone"};device.call=function(b,a){device.open("device://"+b,a)};device.shoutem=function(b,a){device.open("shoutem://"+b,a)};device.name=(function(){var d=navigator.userAgent.toLowerCase();var a=["android","iphone","ipod","ipad","blackberry","nokia","opera mobi"];for(var b in a){var c=a[b];if(d.indexOf(c)!=-1){return c}}return"pc"})();device.resolution=function(){return screen.width+"x"+screen.height};if(location.protocol.indexOf("http")!=-1){device.scriptOrigin="remote";device.platform="web"}else{if(device.name==="pc"&&location.hostname===""){device.scriptOrigin="local";device.platform="web"}else{device.scriptOrigin="local";device.platform="native"}}if(location.href.indexOf("native")!=-1){device.platform="native"}setSysInfoHandler=function(a){if(a){device.sysInfo=device.locale=a}};device.supports={html5AudioPlayer:device.isNativeIPhone(),iTunesLink:device.isNativeIPhone()};device.sysInfo=device.locale={isPositionFixedSupported:false,locale:"en_US",measurementSystem:"Metric"}})();
var Binding=(function(){var a={getValue:function(d,c,b){var f=c.split(".");var f=[];$.each(c.split("."),function(j,h){var k=h.split("[");if(k.length===1){f.push(h)}else{$.each(k,function(m,l){if(l){if(l.indexOf("]")!==-1){f.push(l.substring(0,l.length-1))}else{f.push(l)}}})}});for(var e=0;e<f.length;e++){var g=f[e];if(typeof(d[g])=="undefined"||d[g]===null){return b}else{d=d[g]}}return d},createObject:function(f){var d=function(p,o,r){var s=o.split(".");for(var q=0;q<s.length-1;q++){var t=s[q];if(!p[t]){p[t]={}}p=p[t]}var n=s[s.length-1];p[n]=r};var j={};if(f.bindDesc instanceof Array){j=[];for(var h=0;h<f.bindDesc.length;h++){var m=Binding.createObject({bindDesc:f.bindDesc[h],bindEnv:f.bindEnv});j.push(m)}return j}for(var e in f.bindDesc){var c=f.bindDesc[e];var l;if(typeof(c)==="object"&&c.path){var b=c.src?c.src:"context";l=a.getValue(f.bindEnv[b],c.path,c.defaultValue)}else{l=typeof(c.value)!="undefined"?c.value:c}if(c.converter){var k=f.bindEnv.converters?f.bindEnv.converters[c.converter.type]:window[c.converter.type];if(k&&typeof(k)=="function"){var g=Binding.createObject({bindDesc:c.converter.parameters,bindEnv:f.bindEnv});l=k(g)}}d(j,e,l)}return j}};return a})();DistanceConverter=function(c){var a=c.placeName;var b="";if(a){b=a}var d=getPlaceDistanceText({geo:{coordinates:[c.latitude,c.longitude]}});if(d&&b!==""){b+=", "}if(d){b+=d}return b};RecurrenceDescriptionConverter=function(d){var j=d.recurrenceMask;if(!j){return false}j=parseInt(j,10);var e="";if(j==127){e=M.everyDay}else{if(j==31){e=M.weekdays}else{if(j==96){e=M.weekend}else{var k="";var c=false;for(i=0;i<7;i++){k+=k?", ":"";c=(j%2);j=parseInt(j/2,10);k+=M.dayOfWeek[i].substring(0,3)}e=k}}}var a=convertDate(d.startDate,d.useDeviceTimeZone);var g=convertDate(d.endDate,d.useDeviceTimeZone);var b=new Date(a);var f=new Date(a);var h=new Date(f.getTime()-b.getTime());if(h.getTime()!==0&&h.getHours()!==24){e+=",";e+=" "+M.from+" "+b.toString(M.timeFormat);e+=" "+M.till+" "+f.toString(M.timeFormat)}return e};SpecializedMapButtonVisibilityConverter=function(a){if(a.placeId){return false}else{if(a.longitude&&a.latitude){return true}else{return false}}};DurationConverter=function(b){var a=parseInt(b.duration_in_seconds,10);if(a){return formatTime(a,"mm:ss")}};LocalizedStringConverter=function(b){var a=b.key;if(M[a]){return M[a]}else{return a}};TextTransformConverter=function(a){switch(a.transformType){case"ToUpperCase":return a.value?a.value.toUpperCase():a.value;break}return a.value};ApplicationEnvironmentConverter=function(c){var b=c.key;var d=ShoutemApp.getModule("Places")||{};var a=ShoutemApp.getModule("RemoveShoutEmBranding")||{};switch(b){case"configuration/communityModule":return ShoutemApp.getModule("Community");case"configuration/places/canShowOnYelp":return d.enable_view_on_yelp;case"configuration/places/canShowNearbyTweets":return d.enable_nearby_tweets;case"configuration/removeShoutEmBranding/removeShoutEmBranding":return a.remove_shoutem_branding;case"loggedInMemberID":return user.getUserId("ShoutemNetwork")}};StringFormatterConverter=function(d){var c=[];for(var a=1;a<10;a++){if(typeof(d["param"+a])=="undefined"){break}c.push(d["param"+a])}var b=d.formatString;for(a=0;a<c.length;a++){b=b.replace(/%@/,c[a])}return b};TimeDistanceConverter=function(d){var b=convertDate(d.startTime,d.useDeviceTimeZone);var a=convertDate(d.endTime,d.useDeviceTimeZone);var e=false;if(d.longitude&&d.latitude){e=getPlaceDistanceText({geo:{coordinates:[d.latitude,d.longitude]}})}var c="";if(b&&a){c=renderEventTime(b,a,d.hideDate,d.hideTime)}else{if(b){c=renderEventTime(b,null,d.hideDate,d.hideTime)}}if(e&&c!==""){c+=", "}if(e){c+=e}return c};var TestBinding=function(){test("TestBinding creation of simple object",function(){var f={id:{path:"id"},title:{path:"title"},"place.imageUrl":{converter:{type:"concatConverter",parameters:{left:{path:"[place].[imageUrls].[0]"},right:{path:"[place].[imageUrls].[0]"}}}}};var c={context:{id:"_id",title:"_name",place:{imageUrls:["_url"]}},converters:{concatConverter:function(g){return g.left+g.right}}};var a={id:"_id",title:"_name",place:{imageUrl:"_url_url"}};var b=Binding.createObject({bindDesc:f,bindEnv:c});var e=JSON.stringify(b);var d=JSON.stringify(a);ok(e===d)})};
(function(b){var a=false;var c=false;document.addEventListener("click",function(d){console.debug("global bubble: "+d.type)},false);document.addEventListener("click",function(d){console.debug("global capture: "+d.type);if(a){a=false;console.debug("preventing default: ");d.stopPropagation();d.preventDefault()}},true);b.fn.touchEvents=function(d){var e=b.extend({delayActive:100},d);return this.each(function(){var f=false;var g=b(this);g.bind("touchstart",function(h){console.debug("Touch "+h.type);var i=b(this);if(e.delayActive){setTimeout(function(){if(!f){i.addClass("se-active")}},e.delayActive)}else{i.addClass("se-active")}}).bind("touchmove",function(h){console.debug("Touch "+h.type);f=true;b(this).removeClass("se-active")}).bind("touchend",function(h){console.debug("Touch "+h.type);if(!f){a=true;setTimeout(function(){a=false},2500);b(this).trigger("fastClick")}b(this).removeClass("se-active");f=false}).bind("touchcancel",function(h){console.debug("Touch "+h.type);b(this).removeClass("se-active");f=false})})}})(jQuery);
config=window.config={};
config.networkTimeout=1000*20;config.secondsBetweenGeoPositioning=80;config.networkCacheSecondsToLive=240;config.googleMapsApi="http://maps.google.com";config.shoutemApi="http://api.shoutem.com/api/twitter/1.0";config.networkId=26928;config.lang="en";config.debug=true;config.apiVersion=7;config.radius=50000;
if(window.console==undefined){console=window.console={}}var methods=["info","debug","warn","error","log"];for(var i=0;i<methods.length;i++){var method=methods[i];if(!console[method]){console[method]=function(){}}if(config.debug&&device.platform==="native"&&device.name==="iphone"){console[method]=(function(){var a="[JS-"+method.toUpperCase()+"] ";return function(){device.call("system/log",{message:a+$.makeArray(arguments).join(" ")})}})()}};
function classExtend(a,b){a.prototype=new b();a.constructor=b;a.prototype.parent=b.prototype}function secondsHadPassed(d){var a=arguments.callee.caller.name;var c=new Date().getTime();var b=secondsHadPassed[a]&&(c-secondsHadPassed[a])/600>=d;secondsHadPassed[a]=c;return b}function showCallStack(){var d=showCallStack,a="Call stack:\n\n";var b=10;while((d=d.caller)!==null){var c=d.toString().match(/^function (\w+)\(/);if(c&&typeof(c)==="object"){c=c[1]}else{c=d.toString().substring(0,64)}a+="F:"+c.substring(0,64)+"\n";a+="A:"+parseArguments(d.arguments).substring(0,128)+"\n";a+="\n";if(b--===0){break}}console.debug(a)}function getColorFromHex(a){return{r:parseInt(a.substring(1,3),16),g:parseInt(a.substring(3,5),16),b:parseInt(a.substring(5,7),16)}}function parseArguments(c){var b=[];for(var d=0;d<c.length;d++){if("string"==typeof c[d]){b.push('"'+c[d]+'"')}else{b.push(c[d])}}return"("+b.join(", ")+")"}function deviceSpecific(a){(a[device.platform+"_"+device.name]||a.other||$.noop)()}function assert(b,a){if(config.debug){if(!b){console.log(a||"assertion has failed")}}}function cloneObj(c){if(c==null||typeof(c)!="object"){return c}var a=new c.constructor();for(var b in c){a[b]=cloneObj(c[b])}return a}function firstNonEmptyString(){var a="";for(var b=0;b<arguments.length;b++){a=arguments[b];if(a&&a!==""){return a}}return a}function cloneAllExcept(d,c){if(d==null||typeof(d)!="object"){return d}var a=new d.constructor();for(var b in d){if($.inArray(b,c)==-1){a[b]=cloneObj(d[b])}}return a}function compareByContent(b,a){return JSON.stringify(b)==JSON.stringify(a)}function firstNonEmpty(b,a){if(b&&b!=""){return b}return a}Date.prototype.atMidnight=function(){return this.getSeconds()==0&&this.getMinutes()==0&&this.getHours()==0};function paramsToObject(c){var f,g=function(d){return decodeURIComponent(d.replace(/\+/g," "))},b=/([^&=]+)=?([^&]*)/g,a={};while(f=b.exec(c)){a[g(f[1])]=g(f[2])}return a}function getClientLanguage(){if(navigator.language){return navigator.language.indexOf("hr")!=-1?"hr":"en"}return location.host.indexOf(".hr")!=-1?"hr":"en"}function toBool(a){if(typeof a==="boolean"){return a}else{if(typeof a==="string"){return a.toUpperCase()==="TRUE"||a.toUpperCase()==="YES"}}return false}function repeatNTimes(c,d,a){var b;for(b=1;b<=d;b++){setTimeout(c,b*a)}}function openInBackground(b,a){$("#backgroundUrl").remove();$("body").append("<iframe id='backgroundUrl' style='display: none' src='"+b+"'></iframe>");if(a){$("#backgroundUrl").load(a)}}function getHost(a){a=a.replace("http://","");var b=a.split("/")[0]||"";return b}function toAbsoluteUrl(a,b){if(a.indexOf("htt")===0){return a}else{return b+a}}function makeUrlAbsolute(a){if(a.indexOf("http://")==-1){return"http://"+a}return a}function isValidUrl(a){return a.indexOf("http:")!=-1||a.indexOf("www.")!=-1}function repeatString(b,a){return new Array(isNaN(a)?1:++a).join(b)}function getHostAddress(a){return a.replace(/(.*?):\/\/([\w\.]*?)\/.*/g,"$1://$2")}function getFromObjectList(d,b,c){if(!c){return false}for(var a=0;a<d.length;a++){if(d[a][b].toString()===c.toString()){return d[a]}}}function onGoogleMapsApiLoaded(){requireGoogleMapsApi.complete();delete requireGoogleMapsApi.complete;requireGoogleMapsApi.loaded=true}function requireGoogleMapsApi(a){if(requireGoogleMapsApi.loaded){a();return}else{requireGoogleMapsApi.complete=a;var b=document.createElement("script");b.type="text/javascript";b.src="http://maps.google.com/maps/api/js?sensor=false&callback=onGoogleMapsApiLoaded";document.body.appendChild(b)}};
if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
var Base64={};Base64.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Base64.encode=function(n,p){p=(typeof p=="undefined")?false:p;var g,b,a,r,o,k,j,h,i=[],f="",m,q,l;var d=Base64.code;q=p?Utf8.encode(n):n;m=q.length%3;if(m>0){while(m++<3){f+="=";q+="\0"}}for(m=0;m<q.length;m+=3){g=q.charCodeAt(m);b=q.charCodeAt(m+1);a=q.charCodeAt(m+2);r=g<<16|b<<8|a;o=r>>18&63;k=r>>12&63;j=r>>6&63;h=r&63;i[m/3]=d.charAt(o)+d.charAt(k)+d.charAt(j)+d.charAt(h)}l=i.join("");l=l.slice(0,l.length-f.length)+f;return l};Base64.decode=function(n,e){e=(typeof e=="undefined")?false:e;var g,b,a,o,k,i,h,q,j=[],p,m;var f=Base64.code;m=e?Utf8.decode(n):n;for(var l=0;l<m.length;l+=4){o=f.indexOf(m.charAt(l));k=f.indexOf(m.charAt(l+1));i=f.indexOf(m.charAt(l+2));h=f.indexOf(m.charAt(l+3));q=o<<18|k<<12|i<<6|h;g=q>>>16&255;b=q>>>8&255;a=q&255;j[l/4]=String.fromCharCode(g,b,a);if(h==64){j[l/4]=String.fromCharCode(g,b)}if(i==64){j[l/4]=String.fromCharCode(g)}}p=j.join("");return e?Utf8.decode(p):p};
