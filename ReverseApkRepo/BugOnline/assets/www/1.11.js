function renderEjs(b,c){if(!renderEjs[b]){var a=$("script#"+b).html();if(!a){a=b}renderEjs[b]=new Function("obj","var p=[], print=function() { p.push.apply(p,arguments); };with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');")}return c?renderEjs[b](c):renderEjs[b]}function getMonth(c,a){if(!c){return}c=convertDate(c,a);var b=new Date(c);return b.toString("MMM")}function getDay(c,a){if(!c){return}c=convertDate(c,a);var b=new Date(c);return b.toString("dd")}function renderTime(c,k,j){try{var d=new Date(c);var a=new Date();if(j){return d.toString(M.timeFormat)}var g=new Date();g.setHours(0,0,0,0);var b=Math.ceil(Math.abs(d.getTime()-g.getTime())/(1000*60*60*24));var i="";if(d.getFullYear()===a.getFullYear()&&a<d&&b<6){if(d.getMonth()===a.getMonth()&&d.getDate()===a.getDate()){i=M.today}else{i=M.dayOfWeek[d.getDay()]}}else{if(d.getFullYear()===a.getFullYear()&&a>=d&&b<30){if(d.getMonth()===a.getMonth()&&d.getDate()===a.getDate()){var e=Math.abs((d.getTime()-a.getTime())/(1000*60*60));var f=Math.abs((d.getTime()-a.getTime())/(1000*60));k=true;if(e>=1){i=getMessage("hoursAgo",parseInt(e))}else{if(f>=10){i=getMessage("minutesAgo",parseInt(f))}else{i=M.justNow}}}else{k=true;i=getMessage("daysAgo",parseInt(b))}}else{i=d.toString(getDateFmt(device.locale.locale));k=true}}if(k||d.atMidnight()){return i}else{return i+" "+d.toString(M.timeFormat)}}catch(h){console.error(h)}}function createImageNode(b,a){return $(new Image()).load(function(){a(true)}).error(function(){a(false)}).attr(b)}function evalCss(a){$("head").append('<style type="text/css">'+a+"</style>")};
(function(){if(window.google&&google.gears){return}var a=null;if(typeof GearsFactory!="undefined"){a=new GearsFactory()}else{try{a=new ActiveXObject("Gears.Factory");if(a.getBuildInfo().indexOf("ie_mobile")!=-1){a.privateSetGlobalObject(this)}}catch(b){if((typeof navigator.mimeTypes!="undefined")&&navigator.mimeTypes["application/x-googlegears"]){a=document.createElement("object");a.style.display="none";a.width=0;a.height=0;a.type="application/x-googlegears";document.documentElement.appendChild(a)}}}if(!a){return}if(!window.google){google={}}if(!google.gears){google.gears={factory:a}}})();
/*
 * geo-location-javascript v0.4.3
 * http://code.google.com/p/geo-location-javascript/
 *
 * Copyright (c) 2009 Stan Wiechers
 * Licensed under the MIT licenses.
 *
 * Revision: $Rev: 68 $: 
 * Author: $Author: whoisstan $:
 * Date: $Date: 2010-02-15 13:42:19 +0100 (Mon, 15 Feb 2010) $:    
 */
var bb_successCallback;var bb_errorCallback;function handleBlackBerryLocation(){if(bb_successCallback&&bb_errorCallback){if(blackberry.location.latitude==0&&blackberry.location.longitude==0){bb_errorCallback({message:"Position unavailable",code:2})}else{var a=null;if(blackberry.location.timestamp){a=new Date(blackberry.location.timestamp)}bb_successCallback({timestamp:a,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}})}if(parseFloat(navigator.appVersion)>=4.6){blackberry.location.removeLocationUpdate(handleBlackBerryLocation)}bb_successCallback=null;bb_errorCallback=null}}var geo_position_js=function(){var a={};var b=null;a.getCurrentPosition=function(c,d,e){b.getCurrentPosition(c,d,e)};a.init=function(){try{if(typeof(geo_position_js_simulator)!="undefined"){b=geo_position_js_simulator}else{if(typeof(bondi)!="undefined"&&typeof(bondi.geolocation)!="undefined"){b=bondi.geolocation}else{if(typeof(navigator.geolocation)!="undefined"&&location.hostname.indexOf("http://")>=0){b=navigator.geolocation;a.getCurrentPosition=function(d,e,f){function g(h){if(typeof(h.latitude)!="undefined"){d({timestamp:h.timestamp,coords:{latitude:h.latitude,longitude:h.longitude}})}else{d(h)}}b.getCurrentPosition(g,e,f)};a.watchPosition=function(d,f,g){try{b.watchPosition(d,f,g);a.clearWatch=function(e){if(typeof(b.clearWatch)!="undefined"){b.clearWatch(e)}}}catch(h){f({message:h,code:1})}}}else{if(typeof(window.google)!="undefined"&&typeof(window.google.gears)!="undefined"){b=google.gears.factory.create("beta.geolocation");a.getCurrentPosition=function(d,f,g){try{function h(e){if(typeof(e.latitude)!="undefined"){d({timestamp:e.timestamp,coords:{latitude:e.latitude,longitude:e.longitude}})}else{d(e)}}b.getCurrentPosition(h,f,g)}catch(i){f({message:i,code:1})}}}else{if(typeof(Mojo)!="undefined"&&typeof(Mojo.Service)!="undefined"&&typeof(Mojo.Service.Request)!="Mojo.Service.Request"){b=true;a.getCurrentPosition=function(d,e,f){parameters={};if(f){if(f.enableHighAccuracy&&f.enableHighAccuracy==true){parameters.accuracy=1}if(f.maximumAge){parameters.maximumAge=f.maximumAge}if(f.responseTime){if(f.responseTime<5){parameters.responseTime=1}else{if(f.responseTime<20){parameters.responseTime=2}else{parameters.timeout=3}}}}r=new Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:parameters,onSuccess:function(g){d({timestamp:g.timestamp,coords:{latitude:g.latitude,longitude:g.longitude,heading:g.heading}})},onFailure:function(g){if(g.errorCode==1){e({code:3,message:"Timeout"})}else{if(g.errorCode==2){e({code:2,message:"Position Unavailable"})}else{e({code:0,message:"Unknown Error: webOS-code"+errorCode})}}}})}}else{if(typeof(device)!="undefined"&&typeof(device.getServiceObject)!="undefined"){b=device.getServiceObject("Service.Location","ILocation");a.getCurrentPosition=function(d,e,f){function h(k,j,i){if(j==4){e({message:"Position unavailable",code:2})}else{d({timestamp:null,coords:{latitude:i.ReturnValue.Latitude,longitude:i.ReturnValue.Longitude,altitude:i.ReturnValue.Altitude,heading:i.ReturnValue.Heading}})}}var g=new Object();g.LocationInformationClass="BasicLocationInformation";b.ILocation.GetLocation(g,h)}}else{if(typeof(window.blackberry)!="undefined"&&blackberry.location.GPSSupported){blackberry.location.setAidMode(2);a.getCurrentPosition=function(d,e,f){bb_successCallback=d;bb_errorCallback=e;if(parseFloat(navigator.appVersion)>=4.6){blackberry.location.onLocationUpdate(handleBlackBerryLocation)}else{blackberry.location.onLocationUpdate("handleBlackBerryLocation()")}blackberry.location.refreshLocation()};b=blackberry.location}}}}}}}}catch(c){if(typeof(console)!="undefined"){console.log(c)}}return b!=null};return a}();
var getGeoPosition;(function(){var e=false;var c;var b=[];var d=[];getGeoPosition=function(i,g){function h(k,j){while(method=k.pop()){method(j)}d=[];b=[];e=false}if(i){b.push(i)}if(g){d.push(g)}if(!e){e=true;console.debug("GEO REQUESTING");c(function(j){console.debug("GEO SUCCESS "+j.coords.latitude+", "+j.coords.longitude);h(b,j)},function(j){console.debug("GEO ERROR "+j);h(d,j)})}else{console.debug("GEO IN PROGRESS just adding to the queue")}};if(device.platform=="native"){onPositionFound=window.onPositionFound=function(i,h){if(i){var g={coords:{latitude:i,longitude:h}};onPositionFound.success(g)}else{onPositionFound.error("position")}};c=function(h,g){onPositionFound.success=h;onPositionFound.error=g;device.call("geo/getPosition",{complete:"onPositionFound"})}}else{var a;var f=true;c=function(i,g){if(a===undefined){a=geo_position_js.init()}if(a){if(f){f=false;var h="geo_position_js.getCurrentPosition($.noop, $.noop, { enableHighAccuracy:true });";repeatNTimes(h,4,3000)}geo_position_js.getCurrentPosition(i,function(){g("position")},{enableHighAccuracy:true,maximumAge:0})}else{g("notSupported")}}}})();
var Geocal=function(){function a(b){return(b*(Math.PI/180))}return{distance:function(f,i,e,h){var g=6371;var k=a(e-f);var b=a(h-i);var m=Math.sin(k/2)*Math.sin(k/2)+Math.cos(a(f))*Math.cos(a(e))*Math.sin(b/2)*Math.sin(b/2);var l=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));var j=g*l;return j},angle:function(g,e,f,d){var b=f-g;var c=d-e;return Math.atan2(c,b)}}}();
var executeAction=function(e,c){if(!e){return}if(e.parameters&&e.parameters.itemId=="post_id"){e.parameters.itemId={path:e.parameters.itemId}}var b=Binding.createObject({bindDesc:e.parameters||{},bindEnv:{context:c}});switch(e.type){case"DelegateAction":var f=Binding.createObject({bindDesc:e.parameters||{},bindEnv:{context:c}});e.delegate(f);return;case"SelectPageAction":switchToIconBoard(parseInt(e.parameters.index,10));return;case"DeleteComment":if(e.params.deletable){deleteNewsComment(e.params.commentId)}return;case"SelectPageAction":return switchToIconBoard((parseInt(e.parameters.index,10)+1));case"ShowRouteAction":return openExternalLink(null,getDirectionsUrl(b.endLatitude,b.endLongitude));case"AddToCalendarAction":b.startTimeMs=b.startTime?(new Date(b.startTime)).getTime():undefined;b.endTimeMs=b.endTime?(new Date(b.endTime)).getTime():undefined;return device.call("load/event/addToCalendar",b)}var d=ShoutemApp.getPageByRef(e.page);if(!d.type){return""}if(d.type){switch(d.type){case"PlaceCategoriesPage":return goToNearbyPlacesByCategory(b.category_id);case"PlaceDetailsPage":return navigateTo(getPlaceDetailsUrl(b.itemId||b.placeId));case"PlacesPage":return navigateTo(getPlacesUrl());case"CheckInPage":return navigateTo(getPlacesUrl());case"ShoutsPage":return navigateTo(getShoutsUrl());case"UserDetailsPage":case"UserEditPage":return navigateTo(getUserDetailsUrl());case"Notifications":return navigateTo(getNotificationsUrl());case"ShoutAddPage":if(b.shoutType=="ShoutType_CheckIn"){return navigateTo(getCheckinUrl(b.placeId))}else{return navigateTo(getNewShoutUrl())}case"AddFriends":return getAddFriendsUrl();case"SearchPage":return navigateTo(getSearchUrl());case"UsersPage":return navigateTo(getUsersUrl());case"BadgesPage":return navigateTo(getBadgesUrl());case"Url":var a;if(shortcut.parameters.category_id){a=ShoutemApp.getFeed(ShoutemApp.FEED_TYPE.URL_FEEDS,shortcut.parameters.category_id)}if(a){if(device.name==="android"&&device.platform==="native"){return device.call("load/url",{url:a.rss_url,external:true})}else{return a.rss_url}}return navigateTo(getUrlCategoriesUrl());break;case"MapPage":if(b&&b.longitude&&b.latitude&&!b.showInPage){return openExternalLink(null,getDirectionsUrl(b.latitude,b.longitude))}break;case"ExternalPage":case"ExternalUrl":case"WebPage":case"Web":if(device.name==="android"&&device.platform==="native"){return device.call("load/url",{url:b.url,external:true})}else{return window.open(b.url)}break;case"MessagesPage":case"Messages":return navigateTo(getMessagesUrl());break}}b._="GenericScreen";b.page=e.page["$ref"];navigateTo("#"+$.param(b))};var actionRunnable=function(b,a){return function(){executeAction(b,a)}};var TestAction=function(){test("TestAction compilation test",function(){var a={id:"The id"};executeAction({type:"OpenPageAction",page:{"$ref":"terraneoPage"},targetParameters:{test:{path:"id"},test2:"This is a test"}},a);ok(true)})};
window.google=window.google||{};google.maps=google.maps||{};(function(){function a(d){document.write('<script src="'+d+'" type="text/javascript"><\/script>')}var b=google.maps.modules={};google.maps.__gjsload__=function(d,e){b[d]=e};google.maps.Load=function(d){delete google.maps.Load;d([null,[[["http://mt0.google.com/vt?lyrs=m@140\u0026src=api\u0026hl=hr-HR\u0026","http://mt1.google.com/vt?lyrs=m@140\u0026src=api\u0026hl=hr-HR\u0026"]],[["http://khm0.google.com/kh?v=74\u0026hl=hr-HR\u0026","http://khm1.google.com/kh?v=74\u0026hl=hr-HR\u0026"],null,null,null,1],[["http://mt0.google.com/vt?lyrs=h@140\u0026src=api\u0026hl=hr-HR\u0026","http://mt1.google.com/vt?lyrs=h@140\u0026src=api\u0026hl=hr-HR\u0026"],null,null,"imgtp=png32\u0026"],[["http://mt0.google.com/vt?lyrs=t@126,r@140\u0026src=api\u0026hl=hr-HR\u0026","http://mt1.google.com/vt?lyrs=t@126,r@140\u0026src=api\u0026hl=hr-HR\u0026"]],null,[[null,0,7,7,[[[330000000,1246050000],[386200000,1293600000]],[[366500000,1297000000],[386200000,1320034790]]],["http://mt0.gmaptiles.co.kr/mt?v=kr1.12\u0026hl=hr-HR\u0026","http://mt1.gmaptiles.co.kr/mt?v=kr1.12\u0026hl=hr-HR\u0026"]],[null,0,8,9,[[[330000000,1246050000],[386200000,1279600000]],[[345000000,1279600000],[386200000,1286700000]],[[348900000,1286700000],[386200000,1293600000]],[[354690000,1293600000],[386200000,1320034790]]],["http://mt0.gmaptiles.co.kr/mt?v=kr1.12\u0026hl=hr-HR\u0026","http://mt1.gmaptiles.co.kr/mt?v=kr1.12\u0026hl=hr-HR\u0026"]],[null,0,10,19,[[[329890840,1246055600],[386930130,1284960940]],[[344646740,1284960940],[386930130,1288476560]],[[350277470,1288476560],[386930130,1310531620]],[[370277730,1310531620],[386930130,1320034790]]],["http://mt0.gmaptiles.co.kr/mt?v=kr1.12\u0026hl=hr-HR\u0026","http://mt1.gmaptiles.co.kr/mt?v=kr1.12\u0026hl=hr-HR\u0026"]],[null,3,7,7,[[[330000000,1246050000],[386200000,1293600000]],[[366500000,1297000000],[386200000,1320034790]]],["http://mt0.gmaptiles.co.kr/mt?v=kr1p.12\u0026hl=hr-HR\u0026","http://mt1.gmaptiles.co.kr/mt?v=kr1p.12\u0026hl=hr-HR\u0026"]],[null,3,8,9,[[[330000000,1246050000],[386200000,1279600000]],[[345000000,1279600000],[386200000,1286700000]],[[348900000,1286700000],[386200000,1293600000]],[[354690000,1293600000],[386200000,1320034790]]],["http://mt0.gmaptiles.co.kr/mt?v=kr1p.12\u0026hl=hr-HR\u0026","http://mt1.gmaptiles.co.kr/mt?v=kr1p.12\u0026hl=hr-HR\u0026"]],[null,3,10,null,[[[329890840,1246055600],[386930130,1284960940]],[[344646740,1284960940],[386930130,1288476560]],[[350277470,1288476560],[386930130,1310531620]],[[370277730,1310531620],[386930130,1320034790]]],["http://mt0.gmaptiles.co.kr/mt?v=kr1p.12\u0026hl=hr-HR\u0026","http://mt1.gmaptiles.co.kr/mt?v=kr1p.12\u0026hl=hr-HR\u0026"]]],[["http://cbk0.google.com/cbk?","http://cbk1.google.com/cbk?"]],[["http://khmdb0.google.com/kh?v=33\u0026hl=hr-HR\u0026","http://khmdb1.google.com/kh?v=33\u0026hl=hr-HR\u0026"]],[["http://mt0.google.com/mapslt?hl=hr-HR\u0026","http://mt1.google.com/mapslt?hl=hr-HR\u0026"]],[["http://mt0.google.com/mapslt/ft?hl=hr-HR\u0026","http://mt1.google.com/mapslt/ft?hl=hr-HR\u0026"]]],["hr-HR","US",null,0,null,"http://maps.google.com","http://maps.gstatic.com/intl/hr_hr/mapfiles/","http://gg.google.com","https://maps.googleapis.com","http://maps.googleapis.com"],["http://maps.gstatic.com/intl/hr_hr/mapfiles/api-3/3/2","3.3.2"],[1640715138],1,null,null,null,null,0,""],c)};var c=(new Date).getTime();a("http://maps.gstatic.com/intl/hr_hr/mapfiles/api-3/3/2/main.js")})();function getGoogleStaticMap(f,d,b,c,e){c=c||15;var a="http://maps.google.com/maps/api/staticmap?center="+f+","+d+"&zoom="+c+"&size="+b+"&sensor=false";if(typeof(e)=="string"){a+="&markers=icon:"+encodeURIComponent(e)+"|"+f+","+d}else{a+="&markers=color:green|"+f+","+d}return a}function reverseGeocode(d,c,a){var b=getServiceClient(config.googleMapsApi,{appendTypeToUrl:false});b.GET("maps/api/geocode/json",{latlng:d+","+c,sensor:false},function(e){a(e.results)},a)};
