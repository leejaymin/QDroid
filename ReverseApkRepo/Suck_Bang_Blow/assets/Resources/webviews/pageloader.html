<!DOCTYPE HTML>  
<html>
	<head>
		<title></title>
		
		<link rel="stylesheet" href="style.css">
		<script src="../binding.js" type="text/javascript"></script>		
		<script src="../jquery/jquery.min.js" type="text/javascript"></script>
		
		<style>
			body{
				font-size:12px;
				background-color:#939393;
				color:#000;
				padding:0;
				margin:0;
			}
			a{
				color:#990100;
			}
			table{
				font-size:12px;
			}
			table table{
				font-size:12px;
			}
			table table table{
				font-size:12px;
			}
			#content2{
				height:1000px;
				padding:5px;
			}
			ul{
				maring:3px;
				padding:3px;
				list-style:none;
			}
			
		</style>
		
	</head>

	<body>
		<div id="content2" style="margin-top:20px;margin-bottom:20px;">
			<div style="padding:20px;"><img  src="../images/ajax-loader.gif"/></div>
		</div>	
		
		<base href="http://suckbangblow.com" />	
		<script type="text/javascript">
			Titanium.App.fireEvent('pageloader-show-actind',{message:'Loading...'});
			
			var eventHref = "";
			function getEventHref(){
				return eventHref;
			}			
			
			Titanium.App.addEventListener('pageloader-webview-load', function(data) {
				//alert(data.html);
				//alert(data.jqueryid);
				
				
				var html = $(data.html).find(data.jqueryid).html();
				
				if(data.jqueryid=='table[width="290"]'){
					html = "<table>" + html + "</table>";
				}	
				html += "<script>hideActInd();<\/script>";
				html = "<div id='" + data.jqueryid + "'>" + html + "</div>";
				
				
				
				$("#content2").html(html);
				
				$("table").attr("width","");
				
				$("object").remove();
				
				
				$("table").attr("align","");
				
					var max_size = 300;
					$("img").each(function(i){
						if( $(this).width() <= 300 ) return;
						
						if( $(this).attr("width") <= 300 && $(this).attr("width") != "" && $(this).attr("width") != null && $(this).attr("width") > 0 ) return;//skip
						
						if (!$(this).hasClass('widget')) {
							if ($(this).height() > $(this).width()) {
								var h = max_size;
								var w = Math.ceil($(this).width() / $(this).height() * max_size);
							}
							else {
								var w = max_size;
								var h = Math.ceil($(this).height() / $(this).width() * max_size);
							}
							$(this).css({
								height: h,
								width: w
							});
						}
					});
				
				
				$('form').submit(function() {
					var rurl = this.action + "?" + $(this).serialize();
					eventHref = rurl;
					//alert(rurl);
					
					Titanium.App.fireEvent('pageloader-loadurl',{url:rurl});//iphone
					return false;
				});

				hideActInd();

				$("a").click(function(){
					eventHref = this.href;//android ti 1.6
					Titanium.App.fireEvent('pageloader-loadurl',{url:this.href});//iphone			
					return false;
				});		
					
			});
			
			function hideActInd(){
				Titanium.App.fireEvent('pageloader-hide-actind');
				Titanium.App.fireEvent('pageloader-webview-adjust-height',{height:$(document).height()});
			}
			
		</script>
		
	</body>
</html>
